<!DOCTYPE html>
<html>
  <head>
    <title>{{code.name}} report - {{result.app.name}} - boop.js</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="{{result.app.icon}}">

    {{> material-design}}

    <style type="text/css">
      .content {
        text-align: center;
      }

      #header {
        text-align: center;
        padding-top: 1em;
      }

      h2 .date {
        opacity: 0.5;
        margin-left: 0.5em;
        font-weight: 100;
      }

      #report {
        text-align: left;
        list-style: none;
        padding: 0 1em;
        overflow-y: auto;
      }

      #report > li {
        white-space: nowrap;
      }

      #report > li:first-child {
        display: none;
      }

      #report > li pre {
        display: inline-block;
        margin: 0;
      }

      #report > li .line-no {
        margin-right: 0.5em;
        opacity: 0.5;
        width: 2em;
        display: inline-block;
        text-align: right;
        font-size: 0.8em;
        font-weight: 300;
      }

      #report > li.success .source {
        color: #43A047;
      }

      #report > li.error .source {
        color: #D32F2F;
      }

      #report > li > span:not(.line-no) {
        display: block;
        margin-left: 3.25em;
      }

      #report .line .source::before {
        content: ' ';
        margin-right: 0.5em;
      }
      #report .line.success .source::before {
        content: '\2713'
      }
      #report .line.error .source::before {
        content: '\2717'
      }
    </style>
  </head>
  <body class="fullbleed">
    <paper-header-panel class="cyan">
      <div class="paper-header">
        <div class="right">
          {{> feedback-button}}
          {{> admin-button user}}
          {{> account-button user}}
        </div>
        <a href="/app/{{result.app.id}}/test/{{result.code_id}}/reports">
          <paper-icon-button icon="arrow-back"></paper-icon-button>
        </a>
        {{> app-info result.app}}
      </div>
      <div class="content">
        <div id="header">
          <h2 class="code">
            <a href="/app/{{result.app.id}}/test/{{result.code_id}}/edit" title="Edit {{code.name}}">{{code.name}}</a>
            <span class="date">{{date_relative result.started_at}}</span>
          </h2>
        </div>
        <ol id="report" start="0">
          {{#result.report}}
            {{#.}}
              <li class="line {{#success}} success{{/success}} {{#error}} error{{/error}}">
                <span class="line-no">{{@index}}</span>
                <pre class="source">{{source}}</pre>
                {{#success}}
                  <span class="success"><pre>{{{stringify result}}}</pre></span>
                {{/success}}
                {{#error}}
                  <span class="error"><pre>{{description}}</pre></span>
                  <span class="stacktrace"><pre>{{stacktrace}}</pre></span>
                {{/error}}
                {{#unless success}}{{#unless error}}
                  <span>{{result}}</span>
                {{/unless}}{{/unless}}
              </li>
            {{/.}}
          {{/result.report}}
        </ol>
      </div>
    </paper-header-panel>
  </body>

  {{> google-analytics}}

</html>
